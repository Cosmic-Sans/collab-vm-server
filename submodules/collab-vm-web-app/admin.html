<!DOCTYPE html>
<html>
<head>
	<title>Admin Panel</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<!--<script src="node_modules/otpauth/dist/otpauth.min.js"></script>-->
	<style type="text/css">
		#login-register-container {
			height: 100%;
			position: fixed;
			left: 0;
			right: 0;
		}

		.login-column { max-width: 450px; }
	</style>
</head>
<body>
	<div class="ui stackable menu">
		<div class="header item">CollabVM</div>
    <a class="item" href="<%= __webpack_public_path__ %>">Home</a>
    <a class="item" href="<%= __webpack_public_path__ + "faq" %>">FAQ</a>
    <a class="item" href="<%= __webpack_public_path__ + "news" %>">News</a>
    <a class="item" href="<%= __webpack_public_path__ + "rules" %>">Rules</a>
    <a class="item" href="https://www.patreon.com/collabvm" target="_blank">Donate</a>
    <a class="item" href="https://reddit.com/r/collabvm" target="_blank">Subreddit</a>
	</div>

  <%= require("html-loader!./login-register.html") %>

	<div id="edit-account">
		<h2 class="ui dividing header">Edit Account</h2>
		<h4 id="edit-username" class="ui header">Cosmic Sans</h4>
		<div class="field">
			<div class="ui left icon input">
				<i class="lock icon"></i>
				<input type="password" id="edit-password-box" placeholder="Password" autocomplete="off">
			</div>
		</div>
		<div class="field">
			<div class="ui left icon input">
				<i class="lock icon"></i>
				<input type="password" id="edit-confirm-password-box" placeholder="Confirm Password" autocomplete="off">
			</div>
		</div>
		<div class="field">
			<div id="edit-toggle-2fa" class="ui toggle checkbox">
				<input type="checkbox" name="public" autocomplete="off">
				<label id="edit-toggle-2fa-label">Use Two-Factor Authentication (2FA)</label>
			</div>
			<p>Two-Factor authentication requires an app such as Google Authenticator.</p>
		</div>
		<div id="edit-save-button" class="ui large positive submit button">Save</div>
	</div>

  <div id="view-vms" class="two column stackable ui container grid">
    <div class="eight wide column">
      <div class="ui form segment">
        <h3 class="ui dividing header">Server Config</h3>
        <div class="field">
          <div class="ui checkbox">
            <input type="checkbox" id="account-registration-checkbox">
            <label>Allow account registration</label>
          </div>
        </div>
        <!--
        <div class="field">
          <div class="ui checkbox">
            <input id="user-vms-enabled-checkbox" type="checkbox">
            <label>User VMs Enabled</label>
          </div>
        </div>
        -->
        <div class="inline fields">
          <div class="field">
            <div class="ui checkbox">
              <input id="max-connections-enabled-checkbox" type="checkbox">
              <label>Max WebSocket connections per IP</label>
            </div>
          </div>
          <div class="field">
            <input id="max-connections-box" type="number" placeholder="Max Connections">
          </div>
        </div>
        <div class="field">
          <label>Ban IP Command</label>
          <input id="ban-ip-cmd-box" type="text" placeholder="Ban IP Command">
        </div>
        <div class="field">
          <label>Unban IP Command</label>
          <input id="unban-ip-cmd-box" type="text" placeholder="Unban IP Command">
        </div>
        <div class="ui form segment">
          <h4 class="ui dividing header">Captchas</h4>
          <div class="field">
            <div class="ui checkbox">
              <input type="checkbox" id="captchas-enabled-checkbox">
              <label>Enable Captchas</label>
            </div>
          </div>
          <div class="field">
            <label>Variables: </label>
            $TOKEN - user&apos;s captcha token, $IP - user&apos;s IP address
          </div>
          <div class="field">
            <label>Verification URL</label>
            <input id="captcha-verification-box" type="text" placeholder="Verification URL">
          </div>
          <div class="field">
            <label>HTTP POST Parameters</label>
            <input id="captcha-post-parameters-box" type="text" placeholder="HTTP POST Parameters">
          </div>
          <div class="field">
            <label>JSON success variable</label>
            <input id="captcha-valid-json-variable-box" type="text" placeholder="JSON success variable">
          </div>
        </div>
        <div class="field">
          <div class="ui checkbox">
            <input type="checkbox" id="require-captcha-checkbox">
            <label>Require captcha before user interaction</label>
          </div>
        </div>
      </div>
    </div>
    <div class="eight wide column">
      <div class="ui form segment">
        <h3 class="ui dividing header">User Invites</h3>
        <div class="field">
          <label>Description</label>
          <input id="user-invite-description-box" type="text" placeholder="Description (optional)">
        </div>
        <div class="field">
          <label>Username</label>
          <input id="user-invite-username-box" type="text" placeholder="Username (optional)">
        </div>
        <div class="field">
          <div class="ui checkbox">
            <input type="checkbox" id="user-invite-admin-checkbox">
            <label>Admin</label>
          </div>
        </div>
        <div class="ui modal" id="user-invite-modal">
          <i class="close icon"></i>
          <div class="header">
            Invite Link
          </div>
          <div class="content image">
            <i class="icon large linkify"></i>
            <a id="user-invite-modal-link" class="description" href="#" target="_blank"></a>
          </div>
          <div class="actions">
            <div class="ui button">OK</div>
          </div>
        </div>
        <button class="ui positive button" type="button" id="user-invite-create-button">
          <i class="plus icon"></i> Create Invite
        </button>
      </div>
    </div>
    <div class="eight wide column">
      <div class="ui form segment">
        <h3 class="ui header">Virtual Machines</h3>
        <div id="vm-list" class="ui celled striped table">
        </div>
        <!--
        <table id="vm-list" class="ui celled striped table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
        -->
        <div class="" style="text-align: right;">
          <button class="ui button" type="button" id="start-vm-button" disabled>
            <span class="glyphicon glyphicon-play" aria-hidden="true"></span> Start
          </button>

          <button class="ui button" type="button" id="stop-vm-button" disabled>
            <span class="glyphicon glyphicon-stop" aria-hidden="true"></span> Stop
          </button>

          <button class="ui button" type="button" id="restart-vm-button" disabled>
            <span class="glyphicon glyphicon-repeat" aria-hidden="true"></span> Restart
          </button>

            <!--<button class="btn btn-default" type="button"
              id="restore-vm-button" disabled>
              <span class="glyphicon glyphicon-repeat" aria-hidden="true"></span> Restore VM
            </button>-->

            <!--
          <div class="ui dropdown" id="vm-action-dropdown">
            <div class="text">VM Action</div>
            <i class="dropdown icon"></i>
            <div class="menu">
              <div class="item" data-value="RestoreVM">Restore Snapshot</div>
              <div class="item" data-value="RebootVM">Reboot</div>
              <div class="item" data-value="ResetVM">Reset</div>
            </div>
          </div>
            -->

          <button class="ui button" type="button" id="settings-vm-button" disabled>
            <i class="setting icon"></i> Change Settings
          </button>

          <button class="ui positive button" type="button" id="new-vm-button">
            <i class="plus icon"></i> New VM
          </button>
        </div>
      </div>
    </div>
    <div id="vm-settings" class="eight wide column" style="display: none">
      <div class="ui form segment">
        <i class="close button icon" style="float: right; cursor: pointer"></i>
        <h3 class="ui header" style="margin-top: 0">New Virtual Machine</h3>
        <form class="ui form">
          <div class="field">
            <div class="ui checkbox">
              <input type="checkbox" name="autostart">
              <label>Auto Start &ndash; start the VM when collab-vm-server starts</label>
            </div>
          </div>

          <div class="field">
            <label>Name</label>
            <input type="text" name="name" placeholder="Name">
          </div>

          <div class="field">
            <label>Description (markdown supported)</label>
            <textarea name="description" placeholder="Description" rows="2"></textarea>
          </div>

          <div class="field">
            <div class="ui checkbox">
              <input type="checkbox" name="safe-for-work">
              <label>Safe For Work</label>
            </div>
          </div>

          <div class="field">
            <label>Operating System</label>
            <input type="text" name="operating-system" placeholder="Operating System">
          </div>

          <div class="fields">
            <div class="eight wide field">
              <label>RAM</label>
              <div class="ui right labeled input">
                <input type="number" name="ram">
                <div class="ui basic label">
                  GiB
                </div>
              </div>
            </div>
            <div class="eight wide field">
              <label>Disk Space</label>
              <div class="ui right labeled input">
                <input type="number" name="disk-space">
                <div class="ui basic label">
                  GiB
                </div>
              </div>
            </div>
          </div>

          <div class="field">
            <label>Start Command</label>
            <input type="text" name="start-command" placeholder="Start Command">
          </div>

          <div class="field">
            <label>Stop Command</label>
            <input type="text" name="stop-command" placeholder="Stop Command">
          </div>

          <div class="field">
            <label>Restart Command</label>
            <input type="text" name="restart-command" placeholder="Restart Command">
          </div>

          <div class="field">
            <div class="ui checkbox">
              <input type="checkbox" name="disallow-guests">
              <label>Registered users only</label>
            </div>
          </div>

          <div class="inline fields">
            <div class="six wide field">
              <div class="ui checkbox">
                <input type="checkbox" name="turns-enabled">
                <label>Turns Enabled</label>
              </div>
            </div>

            <div class="ten wide field">
              <label>Turn Time</label>
              <div class="ui right labeled input">
                <input type="number" name="turn-time">
                <div class="ui basic label">
                  seconds
                </div>
              </div>
            </div>
          </div>

            <div class="four wide field">
              <div class="ui checkbox">
                <input type="checkbox" name="votes-enabled">
                <label>Votes Enabled</label>
              </div>
            </div>

          <div class="inline fields">
            <div class="eight wide field">
              <label>Vote Time</label>
              <div class="ui right labeled input">
                <input type="number" name="vote-time">
                <div class="ui basic label">
                  seconds
                </div>
              </div>
            </div>

            <div class="eight wide field">
              <label>Vote Cooldown Time</label>
              <div class="ui right labeled input">
                <input type="number" name="vote-cooldown-time">
                <div class="ui basic label">
                  seconds
                </div>
              </div>
            </div>
          </div>

          <!--
          <div class="fields">
            <div class="four wide field">
              <div class="ui checkbox">
                <input type="checkbox" name="uploads-enabled">
                <label>Uploads Enabled</label>
              </div>
            </div>

            <div class="six wide field">
              <label>Upload Cooldown Time</label>
              <div class="ui right labeled input">
                <input type="number" name="upload-cooldown-time">
                <div class="ui basic label">
                  seconds
                </div>
              </div>
            </div>

            <div class="six wide field">
              <label>Max Upload Size</label>
              <div class="ui action input">
                <input type="number" name="max-upload-size">
          --><!-- Semantic sets the width of this dropdown to 100%
                     because it is inside of a form so change it back.  -->
                <!-- <select class="ui compact selection dropdown" style="width: initial">
                  <option value="0">bytes</option>
                  <option value="1">KiB</option>
                  <option selected="" value="2">MiB</option>
                  <option value="3">GiB</option>
                </select>
              </div> 
            </div>
          </div>
          -->

					<div class="field">
						<label>Protocol</label>
						<select class="ui dropdown" name="protocol">
							<option value="0">RDP</option>
							<option value="1">VNC</option>
						</select>
					</div>

          <h4>Guacamole Connection Parameters</h4>
          <div id="guac-table" class="ui table">
          </div>
          <div id="guac-table-placeholder" style="text-align: center">
            No parameters. The <code>hostname</code> and <code>port</code>
            parameters may be required.
          </div>
          <div id="guac-table-footer" class="tabulator-footer">
             <button class="ui mini positive button" type="button">
               <i class="plus icon"></i>New
             </button>
           </div>
          <p>See <a target="_blank"
            href="https://guacamole.apache.org/doc/gug/configuring-guacamole.html#connection-configuration">here</a>
          for Guacamole connection parameters.</p>
        </form>
        <div class="ui divider">
        </div>
        <div class="ui right aligned grid">
          <div class="aligned center column">
            <button class="ui negative button" type="button"
              id="delete-vm-button">
              <i class="trash icon"></i> Delete VM
            </button>
            <div id="delete-vm-modal" class="ui basic modal">
              <div class="ui icon header">
                <i class="trash icon"></i>
                Delete this VM
              </div>
              <div class="content" style="text-align: center">
                <p>Are you sure you want to delete this VM?</p>
              </div>
              <div class="actions">
                <div class="ui basic cancel inverted button">
                  <i class="remove icon"></i>
                  Cancel
                </div>
                <div class="ui red ok inverted button">
                  <i class="trash icon"></i>
                  Delete
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

	<div id="linked-servers">
		<h2 class="ui header">User Hosts</h2>
		<table class="ui celled striped table">
			<thead>
				<tr>
					<th>Username</th>
					<th>Server Address</th>
					<th>VM Name</th>
					<th>Status</th>
				</tr>
			</thead>
			<tbody></tbody>
		</table>
	</div>

	<div id="loading">
		<div class="ui segment">
			<p></p>
			<div class="ui active dimmer">
				<div class="ui loader"></div>
			</div>
		</div>
	</div>

	</body>
</html>
